<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Ragnarok - Grimório</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="sidebar">
        <h2>Grimório</h2>
        
        <a href="{{ url_for('novo_personagem') }}" target="char_frame" class="btn btn-new">
            + Novo Herói
        </a>

        <!-- NOVO: Botão de Configuração -->
        <a href="{{ url_for('gerenciar_modelos') }}" target="char_frame" class="btn" style="width:100%; margin-bottom: 20px; background: #4a3b2a; font-size: 0.8rem;">
            ⚙️ Configurar Modelos
        </a>

        <nav>
            {% for p in personagens %}
                <a href="{{ url_for('ver_ficha', id=p.id) }}" target="char_frame" class="char-link">
                    {{ p.nome }}
                </a>
            {% else %}
                <p style="text-align:center; font-style:italic; color:#888;">Nenhum registro.</p>
            {% endfor %}
        </nav>
    </div>

    <div class="main-content">
        <div class="frame-container">
            <!-- CORREÇÃO: O endpoint correto é 'novo_personagem', que renderiza a seleção de modelos por padrão -->
            <iframe name="char_frame" src="{{ url_for('novo_personagem') if not personagens else 'about:blank' }}" title="Ficha"></iframe>
        </div>
    </div>

    <script>
        // Pequeno script para melhorar UX se não tiver ninguém na lista
        // Como não tenho uma rota dedicada "home_iframe", criei uma lógica inline no src acima
        // mas para garantir, se quiser uma rota limpa:
    </script>
</body>
</html>